# PRD: 카카오톡 링크 추출 및 정리 웹앱

## 1. 제품 개요

### 1.1 제품명
KakaoLink Extractor (또는 ChatLink Organizer)

### 1.2 목적
카카오톡 채팅방 대화내보내기 CSV 파일에서 링크를 자동으로 추출하여 정리된 데이터 테이블로 제공하는 웹 기반 도구

### 1.3 핵심 가치
- 흩어진 채팅 속 유용한 링크들을 한 눈에 정리
- 별도 저장 없이 즉시 사용 가능한 간편함
- 다양한 형태로 결과물 공유 및 활용 가능

## 2. 기능 요구사항

### 2.1 핵심 기능
- **CSV 파일 업로드**: 카카오톡 대화내보내기 CSV 파일 드래그앤드롭 또는 파일 선택 업로드
- **링크 자동 추출**: CSV 파일의 Message 컬럼에서 URL 패턴 자동 감지 및 추출
- **컨텍스트 정보 수집**: 링크가 포함된 메시지의 전체 텍스트 및 발신자, 날짜 정보 추출
- **데이터 테이블 생성**: 링크와 설명이 포함된 정리된 테이블 형태로 표시

### 2.2 내보내기 기능
- **웹 테이블 표시**: 브라우저에서 바로 확인 가능한 테이블 뷰
- **Notion 공유**: Notion 데이터베이스로 직접 내보내기
- **CSV 다운로드**: 스프레드시트 호환 CSV 파일 생성
- **Excel 다운로드**: .xlsx 형태 Excel 파일 생성
- **PDF 다운로드**: 인쇄 가능한 PDF 보고서 형태

### 2.3 부가 기능
- **링크 유효성 검증**: 추출된 링크의 접근 가능 여부 확인 (선택사항)
- **링크 미리보기**: 가능한 경우 링크 제목이나 설명 자동 수집
- **필터링**: 특정 도메인이나 링크 유형별 필터링, 사용자별 필터링
- **정렬**: 날짜, 도메인, 사용자, 빈도 등 다양한 기준으로 정렬

## 3. 기술 요구사항

### 3.1 프론트엔드
- **Framework**: React 또는 Vue.js
- **UI 라이브러리**: Tailwind CSS 또는 Material-UI
- **파일 처리**: FileReader API를 활용한 클라이언트 사이드 CSV 파싱
- **CSV 파싱**: Papa Parse 라이브러리 활용
- **테이블 컴포넌트**: 정렬, 필터링이 가능한 데이터 테이블 라이브러리

### 3.2 데이터 처리
- **CSV 파싱**: 카카오톡 CSV 구조 분석 및 파싱 (Date, User, Message 컬럼)
- **URL 추출**: 정규표현식을 활용한 URL 패턴 매칭
- **텍스트 처리**: 링크 포함 메시지 전체 텍스트 추출 및 정리

### 3.3 내보내기 기능
- **CSV 생성**: Papa Parse 또는 유사 라이브러리
- **Excel 생성**: SheetJS 라이브러리 활용
- **PDF 생성**: jsPDF 또는 Puppeteer 활용
- **Notion API**: Notion API 연동

## 4. 사용자 경험 (UX) 요구사항

### 4.1 사용자 플로우
1. 웹앱 접속
2. CSV 파일 업로드 (드래그앤드롭 또는 파일 선택)
3. 파일 자동 분석 및 링크 추출
4. 결과 테이블 확인
5. 필요시 필터링/정렬 적용
6. 원하는 형태로 내보내기

### 4.2 UI/UX 가이드라인
- **직관적 인터페이스**: 별도 사용 설명 없이도 사용 가능
- **반응형 디자인**: 모바일과 데스크톱 모두 지원
- **진행 상태 표시**: 파일 분석 중 로딩 상태 표시
- **에러 처리**: 잘못된 파일 형식이나 오류 상황에 대한 명확한 안내
- **파일 형식 검증**: 카카오톡 CSV 형식 확인 및 안내

## 5. 데이터 구조

### 5.1 입력 데이터 (CSV 형식)
```csv
Date,User,Message
2024-01-01 12:00:00,홍길동,이 링크 봐 https://example.com 정말 유용해
2024-01-01 12:05:00,김철수,https://github.com/project 이거 참고하면 좋을 것 같아
```

### 5.2 출력 데이터 구조
| 컬럼명 | 설명 | 예시 |
|--------|------|------|
| URL | 추출된 링크 | https://example.com |
| 설명/메시지 | 링크가 포함된 전체 메시지 | "이 링크 봐 https://example.com 정말 유용해" |
| 발신자 | 메시지 작성자 | "홍길동" |
| 날짜 | 메시지 전송 시간 | "2024-01-01 12:00:00" |
| 도메인 | 링크 도메인 | "example.com" |

## 6. 비기능 요구사항

### 6.1 보안
- **클라이언트 사이드 처리**: 모든 데이터 처리를 브라우저에서 수행, 서버 업로드 없음
- **개인정보 보호**: 채팅 내용이 서버에 저장되지 않음

### 6.2 성능
- **파일 크기 제한**: 최대 10MB CSV 파일 처리 가능
- **처리 속도**: 10,000개 메시지 기준 5초 이내 처리
- **메모리 효율성**: 대용량 파일 처리 시 메모리 최적화

### 6.3 호환성
- **브라우저 지원**: Chrome, Firefox, Safari, Edge 최신 버전
- **카카오톡 버전**: 최신 대화내보내기 CSV 형식 지원
- **CSV 인코딩**: UTF-8 인코딩 지원 (한글 처리)

## 7. 개발 우선순위

### 7.1 MVP (Phase 1)
- 기본 CSV 파일 업로드 및 파싱
- 링크 추출 및 테이블 표시
- CSV 다운로드 기능
- 기본적인 에러 처리

### 7.2 Phase 2
- Excel, PDF 다운로드 기능
- 기본적인 필터링 및 정렬
- UI/UX 개선
- 사용자별 필터링

### 7.3 Phase 3
- Notion API 연동
- 고급 필터링 기능
- 링크 미리보기 기능
- 중복 링크 제거 옵션

## 8. 제약사항 및 고려사항

- **데이터 저장 없음**: 세션 기반으로만 작동, 새로고침 시 데이터 초기화
- **오프라인 사용**: 인터넷 연결 없이도 기본 기능 사용 가능 (내보내기 제외)
- **카카오톡 CSV 구조 변경**: 향후 카카오톡 업데이트로 인한 CSV 구조 변경 대응 필요
- **한글 인코딩**: 카카오톡 CSV의 한글 처리 및 인코딩 이슈 대응
- **CSV 파일 검증**: 올바른 카카오톡 CSV 형식인지 검증 로직 필요

## 9. 추가 고려사항

### 9.1 CSV 파일 형식 검증
- Date, User, Message 컬럼 존재 확인
- 날짜 형식 유효성 검증
- 빈 행 및 잘못된 데이터 처리

### 9.2 링크 추출 개선
- 단축 URL (bit.ly, tinyurl 등) 지원
- 한글 도메인 처리
- 특수 문자가 포함된 URL 처리
